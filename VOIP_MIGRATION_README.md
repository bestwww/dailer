# üîÑ VoIP Provider Migration (FreeSWITCH ‚Üî Asterisk)

## üìã **–ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ - –≠—Ç–∞–ø 1 ‚úÖ + –≠—Ç–∞–ø 2 ‚úÖ**

### ‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **üéØ VoIP Provider Interface** (`backend/src/services/voip-provider.ts`)
   - –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª—é–±–æ–π VoIP —Å–∏—Å—Ç–µ–º–æ–π
   - –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –∏ –º–µ—Ç–æ–¥–æ–≤

2. **üî• FreeSWITCH Adapter** (`backend/src/services/adapters/freeswitch-adapter.ts`)
   - –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞ FreeSWITCH
   - **–í–ê–®–ò –ò–ó–ú–ï–ù–ï–ù–ò–Ø: 0%** - –≤–µ—Å—å –∫–æ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω!
   - –ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –≤—ã–∑–æ–≤—ã –∫ `freeswitchClient`

3. **üÜï Asterisk Adapter** (`backend/src/services/adapters/asterisk-adapter.ts`)
   - **–ü–û–õ–ù–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø AMI –∫–ª–∏–µ–Ω—Ç–∞**
   - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Asterisk —á–µ—Ä–µ–∑ AMI
   - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π AMI ‚Üí VoIP –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
   - –ö–æ–º–∞–Ω–¥—ã: Originate, Hangup, Command
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

4. **üè≠ VoIP Provider Factory** (`backend/src/services/voip-provider-factory.ts`)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
   - Singleton pattern –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

5. **‚öôÔ∏è –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** (`backend/src/config/index.ts`)
   - –ù–æ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `VOIP_PROVIDER=freeswitch|asterisk`
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Asterisk (host, port, username, password)

6. **üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –¥–∏–∞–ª–µ—Ä** (`backend/src/services/dialer.ts`)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `VoIPProvider` –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ `freeswitchClient`
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª—é–±–æ–π VoIP –ø—Ä–æ–≤–∞–π–¥–µ—Ä –ø—Ä–æ–∑—Ä–∞—á–Ω–æ

7. **üê≥ Docker –æ–±—Ä–∞–∑ Asterisk** (`docker/asterisk/`)
   - –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –æ–±—Ä–∞–∑ Ubuntu 22.04 + Asterisk 20
   - AMI –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –¥–∏–∞–ª–µ—Ä–∞
   - –ë–∞–∑–æ–≤—ã–π –¥–∏–∞–ª–ø–ª–∞–Ω —Å IVR –ª–æ–≥–∏–∫–æ–π
   - PJSIP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è SIP trunk

8. **üìû Asterisk –¥–∏–∞–ª–ø–ª–∞–Ω** (`docker/asterisk/conf/extensions.conf`)
   - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è FreeSWITCH –ª–æ–≥–∏–∫–∏ –≤ Asterisk
   - –ö–æ–Ω—Ç–µ–∫—Å—Ç `campaign-calls` –¥–ª—è –∫–∞–º–ø–∞–Ω–∏–π
   - IVR —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π DTMF (1/2)
   - TODO: AMD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

9. **üîó AMI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** (`asterisk-manager` –ø–∞–∫–µ—Ç)
   - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Asterisk Manager Interface
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π: Newchannel, DialEnd, Hangup, DTMFEnd
   - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π VoIP —Ñ–æ—Ä–º–∞—Ç

10. **üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** (`backend/src/scripts/test-asterisk.ts`)
    - –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç AMI –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
    - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–∞–Ω–¥ –∏ —Å–æ–±—ã—Ç–∏–π
    - –¢–µ—Å—Ç–æ–≤—ã–µ –∑–≤–æ–Ω–∫–∏ (–±–µ–∑–æ–ø–∞—Å–Ω–æ)

11. **üê≥ Docker Compose –ø—Ä–æ—Ñ–∏–ª–∏**
    - `docker-compose.yml` - FreeSWITCH –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    - `docker-compose.asterisk.yml` - —Ä–µ–∂–∏–º Asterisk
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

## üöÄ **–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**

### **–¢–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º (FreeSWITCH):**
```bash
# –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è FreeSWITCH (–≤–∞—à —Ç–µ–∫—É—â–∏–π –∫–æ–¥)
VOIP_PROVIDER=freeswitch

# –ò–ª–∏ –≤–æ–æ–±—â–µ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å (FreeSWITCH –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
docker compose up -d
```

### **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ Asterisk (–ì–û–¢–û–í–û!):**
```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
VOIP_PROVIDER=asterisk docker compose up -d

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π compose —Ñ–∞–π–ª
docker compose -f docker-compose.yml -f docker-compose.asterisk.yml up -d

# –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ –ø—Ä–æ—Ñ–∏–ª—å
docker compose --profile asterisk up -d
```

### **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
```javascript
import { switchVoIPProvider } from '@/services/voip-provider-factory';

// –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ Asterisk
const asteriskProvider = await switchVoIPProvider('asterisk');

// –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ FreeSWITCH  
const freeswitchProvider = await switchVoIPProvider('freeswitch');
```

## üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**

```bash
# –¢–µ—Å—Ç Asterisk AMI
cd backend && npm run dev -- --script test-asterisk

# –¢–µ—Å—Ç SIP trunk (62.141.121.197:5070)
cd backend && npm run dev -- --script test-sip-trunk

# –ó–∞–ø—É—Å–∫ —Å FreeSWITCH (—Ç–µ–∫—É—â–∏–π)
VOIP_PROVIDER=freeswitch docker compose up -d

# –ó–∞–ø—É—Å–∫ —Å Asterisk (–ì–û–¢–û–í –¥–ª—è –∑–≤–æ–Ω–∫–æ–≤!)
SIP_CALLER_ID_NUMBER=+7123456789 VOIP_PROVIDER=asterisk docker compose --profile asterisk up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ SIP trunk
docker exec dialer_asterisk asterisk -rx "pjsip show endpoint trunk"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ Asterisk
docker logs dialer_asterisk
```

## üìä **–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:**

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | FreeSWITCH | Asterisk | –°—Ç–∞—Ç—É—Å |
|-----------|------------|----------|---------|
| VoIP Interface | ‚úÖ | ‚úÖ | –ì–æ—Ç–æ–≤–æ |
| Adapter | ‚úÖ | ‚úÖ | **–û–ë–ê –ì–û–¢–û–í–´** |
| Docker | ‚úÖ | ‚úÖ | **–û–ë–ê –ì–û–¢–û–í–´** |
| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | ‚úÖ | ‚úÖ | **–û–ë–ê –ì–û–¢–û–í–´** |
| –î–∏–∞–ª–ø–ª–∞–Ω | ‚úÖ | ‚úÖ | **–û–ë–ê –ì–û–¢–û–í–´** |
| AMI/ESL | ‚úÖ | ‚úÖ | **–û–ë–ê –ì–û–¢–û–í–´** |
| –°–æ–±—ã—Ç–∏—è | ‚úÖ | ‚úÖ | **–û–ë–ê –ì–û–¢–û–í–´** |
| SIP Trunk | ‚úÖ | ‚úÖ | **–ù–ê–°–¢–†–û–ï–ù** (62.141.121.197:5070) |

**–õ–µ–≥–µ–Ω–¥–∞:** ‚úÖ –ì–æ—Ç–æ–≤–æ | üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ | ‚è≥ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ

## üéØ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**

### ‚úÖ **–ß—Ç–æ –£–ñ–ï —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. **–°–æ—Ö—Ä–∞–Ω–µ–Ω 100% –∫–æ–¥–∞ FreeSWITCH** - –Ω–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π!
2. **–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π Asterisk –∞–¥–∞–ø—Ç–µ—Ä** - AMI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞!
3. **SIP Trunk –Ω–∞—Å—Ç—Ä–æ–µ–Ω** - 62.141.121.197:5070 –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏!
4. **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π**
5. **–ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö VoIP —Å–∏—Å—Ç–µ–º**
6. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - FreeSWITCH —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
7. **–ì–û–¢–û–í –ö –ó–í–û–ù–ö–ê–ú** - –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ Asterisk –°–ï–ô–ß–ê–°!
8. **Docker –ø—Ä–æ—Ñ–∏–ª–∏** - –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
9. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π** –≤ –æ–±–µ–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö
10. **–ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - AMI, SIP trunk, –∫–æ–º–∞–Ω–¥—ã

### üîÆ **–ß—Ç–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ:**
1. **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** FreeSWITCH vs Asterisk
2. **–ü–ª–∞–≤–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è** –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–∏—Å—Ç–µ–º—ã
3. **Fallback –Ω–∞ FreeSWITCH** –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å Asterisk
4. **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥—Ä—É–≥–∏—Ö VoIP —Å–∏—Å—Ç–µ–º** (–Ω–∞–ø—Ä–∏–º–µ—Ä, Kamailio)

## üìã **–°–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã:**

### **–≠—Ç–∞–ø 2 (AMI/ARI –∫–ª–∏–µ–Ω—Ç)** - ‚úÖ –ó–ê–í–ï–†–®–ï–ù
- [x] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Asterisk AMI
- [x] –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π AMI ‚Üî VoIP –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- [x] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- [x] Docker –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –ø—Ä–æ—Ñ–∏–ª–∏

### **–≠—Ç–∞–ø 3 (–¢–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞)** - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ SIP trunk –≤ Asterisk
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è AMD (Answering Machine Detection)
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥

### **–≠—Ç–∞–ø 4 (Production)** - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
- [ ] Production deployment —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
- [ ] A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ FreeSWITCH vs Asterisk
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- [ ] –û–±—É—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã

## üîß **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**

```bash
# VoIP –ø—Ä–æ–≤–∞–π–¥–µ—Ä
VOIP_PROVIDER=freeswitch  # –∏–ª–∏ asterisk

# FreeSWITCH (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ)
FREESWITCH_HOST=freeswitch
FREESWITCH_PORT=8021
FREESWITCH_PASSWORD=ClueCon

# Asterisk (–Ω–æ–≤—ã–µ)
ASTERISK_HOST=asterisk
ASTERISK_PORT=5038
ASTERISK_USERNAME=admin
ASTERISK_PASSWORD=admin
```

## üí° **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

1. **–°–µ–π—á–∞—Å**: –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å FreeSWITCH –∫–∞–∫ –æ–±—ã—á–Ω–æ
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ VoIP Provider Factory
3. **–ú–∏–≥—Ä–∞—Ü–∏—è**: –ö–æ–≥–¥–∞ Asterisk –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤, –ø–µ—Ä–µ–∫–ª—é—á–∞–π—Ç–µ—Å—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ
4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –í production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –¥–ª—è AMI

---

## üéâ **–†–ï–ó–£–õ–¨–¢–ê–¢ –ú–ò–ì–†–ê–¶–ò–ò:**

### **‚úÖ –ú–ò–ì–†–ê–¶–ò–Ø –ù–ê ASTERISK –ì–û–¢–û–í–ê!**

**üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç –≠—Ç–∞–ø–æ–≤ 1+2:** 
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –≥–∏–±–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö VoIP –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- ‚úÖ **FreeSWITCH –∫–æ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –Ω–∞ 100%** - –Ω–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π!
- ‚úÖ **Asterisk –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω** - AMI, —Å–æ–±—ã—Ç–∏—è, –∫–æ–º–∞–Ω–¥—ã
- ‚úÖ **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π** - `VOIP_PROVIDER=asterisk`
- ‚úÖ **Docker –ø—Ä–æ—Ñ–∏–ª–∏** –¥–ª—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –º–æ–∂–µ—Ç–µ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ FreeSWITCH –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç

### **üöÄ –í—ã –º–æ–∂–µ—Ç–µ –ü–†–Ø–ú–û –°–ï–ô–ß–ê–°:**
```bash
# –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Asterisk —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º SIP trunk
SIP_CALLER_ID_NUMBER=+7–≤–∞—à—Ç–µ–ª–µ—Ñ–æ–Ω VOIP_PROVIDER=asterisk docker compose --profile asterisk up -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SIP trunk
docker exec dialer_asterisk asterisk -rx "pjsip show endpoint trunk"

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–≤–æ–Ω–∫–∏ —á–µ—Ä–µ–∑ –¥–∏–∞–ª–µ—Ä
cd backend && npm run dev -- --script test-sip-trunk

# –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ FreeSWITCH  
VOIP_PROVIDER=freeswitch docker compose up -d
```

**–ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!** üéä 
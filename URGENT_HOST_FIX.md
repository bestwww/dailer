# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ —Ö–æ—Å—Ç-—Å–∏—Å—Ç–µ–º–µ

## –ü—Ä–æ–±–ª–µ–º–∞
‚ùå **EACCES: permission denied** - –ø–∞–ø–∫–∞ `/app/audio` –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç `root:988`, –∞ –ø—Ä–æ—Ü–µ—Å—Å Node.js —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥ `nodeuser`

## üöÄ –ë–´–°–¢–†–û–ï –†–ï–®–ï–ù–ò–ï (2 –º–∏–Ω—É—Ç—ã)

### –ù–∞ —Ç–µ—Å—Ç–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
./host-permissions-fix.sh
```

**–ò–õ–ò –µ—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤—Ä—É—á–Ω—É—é:**

```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down

# 2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ —Ö–æ—Å—Ç-—Å–∏—Å—Ç–µ–º–µ
sudo chown -R 1001:1001 ./audio/
sudo chmod -R 755 ./audio/

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose up -d --build backend

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
docker exec dialer_backend ls -la /app/audio/
docker exec dialer_backend touch /app/audio/test.txt
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã

**–ü—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏:**
- Volume `./audio` —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω —Å –ø—Ä–∞–≤–∞–º–∏ —Ö–æ—Å—Ç-—Å–∏—Å—Ç–µ–º—ã
- –ù–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∞ –í–ù–£–¢–†–ò –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∫–æ–º–∞–Ω–¥–æ–π `docker exec`
- –ù—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∞ –ù–ê –•–û–°–¢-–°–ò–°–¢–ï–ú–ï

**–ö–∞–∫ —ç—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
1. ‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
2. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ `1001:1001` (nodeuser:nodejs)
3. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤ `755`
4. ‚úÖ –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ backend —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏

## üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```bash
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: drwxr-xr-x nodeuser nodejs
docker exec dialer_backend ls -la /app/audio/

# –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫
docker exec dialer_backend touch /app/audio/test.txt
```

## üß™ –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏

```bash
# –¢–µ—Å—Ç —á–µ—Ä–µ–∑ API
curl -X POST -F "audio=@test.mp3" http://localhost:3000/api/campaigns/1/audio
# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: {"success":true,...}
```

## ‚ö†Ô∏è –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Docker volume –Ω–µ cached:
   ```bash
   docker volume ls
   docker volume inspect dailer_v1_audio_data 2>/dev/null || echo "Volume –Ω–µ –Ω–∞–π–¥–µ–Ω"
   ```

2. –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞:
   ```bash
   docker-compose down -v
   docker system prune -f
   sudo rm -rf ./audio
   mkdir -p ./audio
   sudo chown -R 1001:1001 ./audio/
   sudo chmod -R 755 ./audio/
   docker-compose up -d --build
   ```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ –§–∞–π–ª—ã –∞—É–¥–∏–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `./audio/campaign-audio-*.mp3`  
‚úÖ –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ê—É–¥–∏–æ—Ñ–∞–π–ª —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω"  
‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ EACCES –≤ –ª–æ–≥–∞—Ö 
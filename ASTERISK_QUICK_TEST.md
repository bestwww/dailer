# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç Asterisk –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## ‚ö° **5-–º–∏–Ω—É—Ç–Ω—ã–π —Ç–µ—Å—Ç**

### 1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
```bash
cd backend
npm install
```

### 2. **–ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ Asterisk (–±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤)**
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ FreeSWITCH –Ω–µ –∑–∞–ø—É—â–µ–Ω
docker compose down

# –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ —Å Asterisk
VOIP_PROVIDER=asterisk docker compose --profile asterisk up -d
```

### 3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞**
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ Asterisk –∑–∞–ø—É—Å—Ç–∏–ª—Å—è
docker ps | grep asterisk

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏
docker logs dialer_asterisk

# –ñ–¥–µ–º "Asterisk Ready"
```

### 4. **–¢–µ—Å—Ç AMI –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ AMI –Ω–∞–ø—Ä—è–º—É—é
telnet localhost 5038

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# Asterisk Call Manager/9.0.0
# Action: Login
# Username: admin
# Secret: admin
# (–Ω–∞–∂–∞—Ç—å Enter –¥–≤–∞–∂–¥—ã)
```

### 5. **–¢–µ—Å—Ç —á–µ—Ä–µ–∑ –¥–∏–∞–ª–µ—Ä**
```bash
cd backend

# –¢–µ—Å—Ç Asterisk –∞–¥–∞–ø—Ç–µ—Ä–∞
npm run dev -- --script test-asterisk

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Asterisk AMI —É—Å–ø–µ—à–Ω–æ
# ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∞
# ‚úÖ –ö–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç

# –¢–µ—Å—Ç SIP trunk (62.141.121.197:5070)
npm run dev -- --script test-sip-trunk

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# ‚úÖ SIP endpoint trunk –Ω–∞—Å—Ç—Ä–æ–µ–Ω
# ‚úÖ SIP trunk –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ 62.141.121.197:5070
# ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞ –¥–ª—è –∑–≤–æ–Ω–∫–æ–≤
```

### 6. **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ FreeSWITCH**
```bash
# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Asterisk
docker compose down

# –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ FreeSWITCH
docker compose up -d

# –ò–ª–∏ —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ–º
VOIP_PROVIDER=freeswitch docker compose up -d
```

## üéØ **–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

### ‚úÖ **–£—Å–ø–µ—à–Ω—ã–π —Ç–µ—Å—Ç:**
```
üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Asterisk –∞–¥–∞–ø—Ç–µ—Ä–∞
üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Asterisk:
   Host: asterisk:5038
   User: admin

üîå –¢–µ—Å—Ç 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Asterisk AMI
‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Asterisk AMI —É—Å–ø–µ—à–Ω–æ

üìä –¢–µ—Å—Ç 2: –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   –ü–æ–¥–∫–ª—é—á–µ–Ω: ‚úÖ
   –ü–æ–ø—ã—Ç–∫–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: 0/10

üìà –¢–µ—Å—Ç 3: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Asterisk
   –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–≤–æ–Ω–∫–∏: 0
   –ê–∫—Ç–∏–≤–Ω—ã–µ –∫–∞–Ω–∞–ª—ã: 0
   –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: 123s
   –ü–æ–¥–∫–ª—é—á–µ–Ω: ‚úÖ
```

### ‚ùå **–ï—Å–ª–∏ —Ç–µ—Å—Ç –Ω–µ –ø—Ä–æ—à–µ–ª:**

**–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Asterisk –∑–∞–ø—É—â–µ–Ω
docker logs dialer_asterisk

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç—ã
netstat -tulpn | grep 5038

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Asterisk
docker compose restart asterisk
```

**–û—à–∏–±–∫–∞ AMI:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
docker exec dialer_asterisk cat /etc/asterisk/manager.conf

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
docker exec dialer_asterisk asterisk -rx "module reload manager"
```

## üîÑ **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**

### **FreeSWITCH —Ç–µ—Å—Ç:**
```bash
VOIP_PROVIDER=freeswitch docker compose up -d
# –í–∞—à–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã
```

### **Asterisk —Ç–µ—Å—Ç:**
```bash
VOIP_PROVIDER=asterisk docker compose --profile asterisk up -d
npm run dev -- --script test-asterisk
```

## üí° **–ü–æ–¥—Å–∫–∞–∑–∫–∏:**

1. **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ Asterisk –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 1-2 –º–∏–Ω—É—Ç—ã** - –¥–æ–∂–¥–∏—Ç–µ—Å—å "Asterisk Ready"
2. **–ü–æ—Ä—Ç—ã –Ω–µ –¥–æ–ª–∂–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å** - Asterisk –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 5038, FreeSWITCH - 8021
3. **–õ–æ–≥–∏ –ø–æ–º–æ–≥–∞—é—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã** - `docker logs dialer_asterisk`
4. **AMI –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é** - admin/admin (—Å–º. manager.conf)
5. **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ** - –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ FreeSWITCH –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç

---
**üéä –ï—Å–ª–∏ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ - –º–∏–≥—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** 
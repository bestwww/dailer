# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ–¥–æ–∑–≤–æ–Ω–∞

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **–û–°:** Ubuntu 22.04 LTS –∏–ª–∏ –≤—ã—à–µ
- **RAM:** 4GB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 8GB)
- **CPU:** 2 cores (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 4 cores)  
- **–î–∏—Å–∫:** 40GB SSD (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 100GB)
- **–°–µ—Ç—å:** –ë–µ–ª—ã–π IP –∞–¥—Ä–µ—Å –¥–ª—è SIP

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
- **RAM:** 8-16GB –¥–ª—è 100+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤
- **CPU:** 4-8 cores
- **–î–∏—Å–∫:** 100GB+ SSD

## üõ†Ô∏è –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ Ubuntu

```bash
# –û–±–Ω–æ–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º—É
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã
sudo apt install -y curl wget git ufw htop nano

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º firewall
sudo ufw allow ssh
sudo ufw allow 80
sudo ufw allow 443
sudo ufw allow 3000    # Backend API
sudo ufw allow 5173    # Frontend (dev)
sudo ufw allow 5060/udp # SIP
sudo ufw allow 8021    # FreeSWITCH ESL
sudo ufw allow 16384:16394/udp # RTP –º–µ–¥–∏–∞
sudo ufw --force enable
```

## üê≥ –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker

```bash
# –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ Docker
sudo apt remove -y docker.io docker-doc docker-compose docker-compose-v2 podman-docker containerd runc

# –î–æ–±–∞–≤–ª—è–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Docker
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg

echo "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Docker
sudo apt update
sudo apt install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin

# –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker
sudo usermod -aG docker $USER

# –ü–µ—Ä–µ–ª–æ–≥–∏–Ω–∏–≤–∞–µ–º—Å—è –∏–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ–º
newgrp docker

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É
docker --version
docker compose version
```

## üì¶ –®–∞–≥ 3: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º –ø—Ä–æ–µ–∫—Ç
git clone https://your-repo-url/dailer_v1.git
cd dailer_v1

# –°–æ–∑–¥–∞–µ–º production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cp .env.production .env

# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥ –≤–∞—à SIP –ø—Ä–æ–≤–∞–π–¥–µ—Ä
nano .env
```

### ‚öôÔ∏è –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ .env:

```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –¥–∞–Ω–Ω—ã–µ –≤–∞—à–µ–≥–æ SIP –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
SIP_PROVIDER_HOST=sip.your-provider.com
SIP_PROVIDER_USERNAME=your_sip_login  
SIP_PROVIDER_PASSWORD=your_sip_password
SIP_CALLER_ID_NUMBER=+7XXXXXXXXXX

# –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
DATABASE_URL=postgresql://dialer_user:CHANGE_DB_PASSWORD@postgres:5432/dialer_db
REDIS_URL=redis://:CHANGE_REDIS_PASSWORD@redis:6379
JWT_SECRET=CHANGE_JWT_SECRET_TO_STRONG_PASSWORD

# –£–∫–∞–∂–∏—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω
CORS_ORIGIN=http://your-server-ip:5173,http://your-domain.com
```

## üöÄ –®–∞–≥ 4: –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

```bash
# –°–æ–∑–¥–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
mkdir -p audio backend/logs

# –ó–∞–ø—É—Å–∫–∞–µ–º –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker compose up -d

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker compose ps

# –°–ª–µ–¥–∏–º –∑–∞ –ª–æ–≥–∞–º–∏
docker compose logs -f
```

## üìä –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
```bash
# –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ "Up"
docker compose ps

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker compose logs postgres
docker compose logs freeswitch  
docker compose logs backend
docker compose logs frontend
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤:
```bash
# Backend API (–¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å—Ç–∞—Ç—É—Å)
curl http://localhost:3000/health

# FreeSWITCH status
docker compose exec freeswitch fs_cli -x "status"

# Frontend (–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
curl http://localhost:5173
```

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
- **Frontend:** http://your-server-ip:5173
- **Backend API:** http://your-server-ip:3000/api

## üîß –®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ FreeSWITCH –¥–ª—è SIP –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SIP –ø—Ä–æ—Ñ–∏–ª—è:
```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é SIP
nano freeswitch/conf/autoload_configs/sofia.conf.xml

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º FreeSWITCH
docker compose restart freeswitch
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ SIP —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
```bash
# –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ FreeSWITCH CLI
docker compose exec freeswitch fs_cli

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å SIP –ø—Ä–æ—Ñ–∏–ª–µ–π
sofia status

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –Ω–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–µ
sofia status gateway your_provider_gateway
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

```bash
# –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git pull origin main

# –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º
docker compose down
docker compose build --no-cache
docker compose up -d
```

## üõ†Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏:
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker compose down

# –ü–æ–ª–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å —É–¥–∞–ª–µ–Ω–∏–µ–º volumes (–í–ù–ò–ú–ê–ù–ò–ï: —É–¥–∞–ª—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –ë–î!)
docker compose down -v

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
docker compose build --no-cache

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker compose logs -f backend
docker compose logs -f freeswitch

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É
docker compose exec backend bash
docker compose exec freeswitch bash
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
df -h

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏
free -h

# –°–µ—Ç–µ–≤—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
ss -tulpn
```

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏
docker compose logs service_name

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
docker compose ps
```

### –ü—Ä–æ–±–ª–µ–º–∞: FreeSWITCH –Ω–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ SIP –ø—Ä–æ–≤–∞–π–¥–µ—Ä–µ
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
docker compose exec freeswitch fs_cli -x "sofia status"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º connectivity
docker compose exec freeswitch ping sip.your-provider.com
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º firewall
sudo ufw status

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–ª—É—à–∞–µ—Ç –ª–∏ –ø–æ—Ä—Ç
ss -tulpn | grep :5173
```

## üìû –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–≤–æ–Ω–∫–æ–≤

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –∫–∞–º–ø–∞–Ω–∏–∏:
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://your-server-ip:5173
2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É  
3. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∫–∞–º–ø–∞–Ω–∏—é
4. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –Ω–æ–º–µ—Ä–∞
5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–∞–º–ø–∞–Ω–∏—é

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–≤–æ–Ω–∫–æ–≤:
```bash
# –õ–æ–≥–∏ –∑–≤–æ–Ω–∫–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker compose logs -f freeswitch | grep DTMF
docker compose logs -f backend | grep "Call"
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ò–∑–º–µ–Ω–∏—Ç–µ –≤—Å–µ –ø–∞—Ä–æ–ª–∏** –≤ .env —Ñ–∞–π–ª–µ
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã** –¥–ª—è HTTPS
3. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø** –∫ –ø–æ—Ä—Ç–∞–º —á–µ—Ä–µ–∑ firewall
4. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ** —Å–∏—Å—Ç–µ–º—É –∏ Docker –æ–±—Ä–∞–∑—ã
5. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

---

üí° **–ü–æ–¥–¥–µ—Ä–∂–∫–∞:** –ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ .env 
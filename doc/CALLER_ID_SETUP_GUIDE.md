# üìû –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Caller ID –¥–ª—è SIP —Ç—Ä–∞–Ω–∫–∞

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê –ù–ê–ô–î–ï–ù–ê!

**–¢–µ–∫—É—â–∞—è –æ—à–∏–±–∫–∞:** `-ERR NORMAL_TEMPORARY_FAILURE`  
**–ü—Ä–∏—á–∏–Ω–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∏–∫—Ç–∏–≤–Ω—ã–π –Ω–æ–º–µ—Ä `+70000000000` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∏—Å—Ö–æ–¥—è—â–µ–≥–æ Caller ID

SIP –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ç—Ä–µ–±—É—é—Ç** –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –Ω–æ–º–µ—Ä –¥–ª—è –∏—Å—Ö–æ–¥—è—â–∏—Ö –∑–≤–æ–Ω–∫–æ–≤!

## üìã –ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨

### 1. **–ü–æ–ª—É—á–∏—Ç—å —É SIP –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (62.141.121.197:5070):**
- ‚úÖ **–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –Ω–æ–º–µ—Ä** –¥–ª—è –∏—Å—Ö–æ–¥—è—â–∏—Ö –∑–≤–æ–Ω–∫–æ–≤
- ‚úÖ **–§–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞** (–æ–±—ã—á–Ω–æ E.164: +7XXXXXXXXXX)
- ‚ö†Ô∏è **–õ–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å** (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)

### 2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Caller ID:**

```bash
# –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
cd ~/dailer
git pull origin main

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Caller ID
./setup-caller-id.sh +79001234567 "–í–∞—à–∞ –∫–æ–º–ø–∞–Ω–∏—è"

# –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
./quick-call-test.sh 79206054020
```

## üìû –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å —Ä–æ—Å—Å–∏–π—Å–∫–∏–º –Ω–æ–º–µ—Ä–æ–º:
```bash
./setup-caller-id.sh +79001234567 "Company Name"
./setup-caller-id.sh 79001234567  # –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–∏—Ç +7
./setup-caller-id.sh 89001234567  # 8 –∑–∞–º–µ–Ω–∏—Ç—Å—è –Ω–∞ +7
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫:
```bash
./setup-caller-id.sh  # –ø–æ–∫–∞–∂–µ—Ç —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
```

## üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú

### –ï—Å–ª–∏ –∑–≤–æ–Ω–∫–∏ –≤—Å–µ –µ—â–µ –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Caller ID:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –Ω–æ–º–µ—Ä –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω —É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞**
2. **–í–æ–∑–º–æ–∂–Ω–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å)**
3. **–£—Ç–æ—á–Ω–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞ —É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞**

### –í–æ–ø—Ä–æ—Å—ã –¥–ª—è SIP –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞:
```
1. –ö–∞–∫–æ–π –Ω–æ–º–µ—Ä –≤—ã–¥–µ–ª–µ–Ω –¥–ª—è –∏—Å—Ö–æ–¥—è—â–∏—Ö –∑–≤–æ–Ω–∫–æ–≤?
2. –í –∫–∞–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –Ω–æ–º–µ—Ä? (+7XXXXXXXXXX –∏–ª–∏ 7XXXXXXXXXX?)
3. –ù—É–∂–Ω–∞ –ª–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å)?
4. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –ª–∏ –∞–Ω–æ–Ω–∏–º–Ω—ã–µ peer-to-peer –∑–≤–æ–Ω–∫–∏?
5. –ï—Å—Ç—å –ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–≤–æ–Ω–∫–æ–≤?
```

## ‚öôÔ∏è –ß–¢–û –î–ï–õ–ê–ï–¢ –°–ö–†–ò–ü–¢ `setup-caller-id.sh`:

1. **–ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –Ω–æ–º–µ—Ä** –≤ —Ñ–æ—Ä–º–∞—Ç E.164 (+7XXXXXXXXXX)
2. **–û–±–Ω–æ–≤–ª—è–µ—Ç vars.xml** - –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Caller ID
3. **–û–±–Ω–æ–≤–ª—è–µ—Ç sofia.conf.xml** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SIP gateway
4. **–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç from-user** –≤ gateway –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä
5. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç FreeSWITCH** –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üéØ –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ Caller ID:
- ‚úÖ **Gateway –æ—Å—Ç–∞–µ—Ç—Å—è UP**
- ‚úÖ **–ó–≤–æ–Ω–∫–∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º**
- ‚úÖ **–ù–µ—Ç –æ—à–∏–±–∫–∏ NORMAL_TEMPORARY_FAILURE**
- ‚úÖ **–í–æ–∑–º–æ–∂–Ω—ã –¥—Ä—É–≥–∏–µ –æ—à–∏–±–∫–∏** (USER_BUSY, NO_ANSWER) - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ

## üìä –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

```bash
# –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
./quick-call-test.sh 79206054020

# –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç
./test-sip-trunk.sh call 79206054020

# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ gateway
./diagnose-host-networking.sh

# –õ–æ–≥–∏ FreeSWITCH
./manage-freeswitch-host.sh logs
```

## üîß –ï–°–õ–ò –¢–†–ï–ë–£–ï–¢–°–Ø –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–Ø

–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ª–æ–≥–∏–Ω–∞/–ø–∞—Ä–æ–ª—è –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, –æ–±–Ω–æ–≤–∏—Ç–µ `sofia.conf.xml`:

```xml
<gateway name="sip_trunk">
    <param name="proxy" value="62.141.121.197:5070"/>
    <param name="register" value="true"/>
    <param name="username" value="–≤–∞—à_–ª–æ–≥–∏–Ω"/>
    <param name="password" value="–≤–∞—à_–ø–∞—Ä–æ–ª—å"/>
    <!-- –æ—Å—Ç–∞–ª—å–Ω–æ–µ –∫–∞–∫ –µ—Å—Ç—å -->
</gateway>
```

## üìã –†–ï–ó–Æ–ú–ï

**–ù–ê–ô–î–ï–ù–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:** –§–∏–∫—Ç–∏–≤–Ω—ã–π Caller ID `+70000000000`  
**–†–ï–®–ï–ù–ò–ï:** –°–∫—Ä–∏–ø—Ç `setup-caller-id.sh` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞  
**–°–õ–ï–î–£–Æ–©–ò–ô –®–ê–ì:** –ü–æ–ª—É—á–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –Ω–æ–º–µ—Ä –æ—Ç SIP –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞  

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–≤—è–∑—å —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º –†–ê–ë–û–¢–ê–ï–¢!** –ù—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Caller ID. 
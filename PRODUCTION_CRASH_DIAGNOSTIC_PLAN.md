# üîç –ü–ª–∞–Ω –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø–∞–¥–µ–Ω–∏–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ

## üö® –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

- **–°—Ä–µ–¥–∞**: –¢–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä (production-like)
- **–°–∏–º–ø—Ç–æ–º—ã**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø–∞–¥–∞–µ—Ç (—É–∂–µ 2 —Ä–∞–∑–∞)
- **–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –ø–æ–º–æ–≥–∞–µ—Ç
- **–ß–∞—Å—Ç–æ—Ç–∞**: –ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞, —Ç—Ä–µ–±—É–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## üéØ –¶–µ–ª–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

1. **–í—ã—è–≤–∏—Ç—å –ø—Ä–∏—á–∏–Ω—É –ø–∞–¥–µ–Ω–∏–π** - —á—Ç–æ –∏–º–µ–Ω–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç —Å–±–æ–π
2. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω** - –∫–æ–≥–¥–∞ –∏ –ø—Ä–∏ –∫–∞–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –ø–∞–¥–µ–Ω–∏—è
3. **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –±—É–¥—É—â–∏–µ –ø–∞–¥–µ–Ω–∏—è** - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
4. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** - —É–ª—É—á—à–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã

## üîß –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### üìä –≠—Ç–∞–ø 1: –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (5-10 –º–∏–Ω—É—Ç)

#### 1.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```bash
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker ps -a
docker-compose ps

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats --no-stream
```

#### 1.2 –°–±–æ—Ä –ª–æ–≥–æ–≤ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–µ—Å—Å–∏–∏
```bash
# –õ–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 2 —á–∞—Å–∞
docker-compose logs --since=2h > crash_logs_$(date +%Y%m%d_%H%M).log

# –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏
journalctl --since="2 hours ago" | grep -i docker > system_logs_$(date +%Y%m%d_%H%M).log
```

#### 1.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ
df -h
du -sh /var/lib/docker/

# –†–∞–∑–º–µ—Ä –ª–æ–≥–æ–≤ Docker
docker system df
```

### üî¨ –≠—Ç–∞–ø 2: –ì–ª—É–±–æ–∫–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (15-20 –º–∏–Ω—É—Ç)

#### 2.1 –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –ø–æ —Å–µ—Ä–≤–∏—Å–∞–º
```bash
# Backend - –æ—à–∏–±–∫–∏ –∏ OOM
docker logs dialer_backend --since=24h | grep -i -E "(error|out of memory|fatal|crash|killed)"

# PostgreSQL - –ø—Ä–æ–±–ª–µ–º—ã —Å –ë–î
docker logs dialer_postgres --since=24h | grep -i -E "(error|fatal|connection|lock)"

# FreeSWITCH - —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã  
docker logs dialer_freeswitch --since=24h | grep -i -E "(error|fatal|crash)"

# Redis - –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–µ—à–µ–º
docker logs dialer_redis --since=24h | grep -i -E "(error|out of memory|fatal)"
```

#### 2.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–º—è—Ç–∏ –∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
```bash
# –ò—Å—Ç–æ—Ä–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏
sar -r 1 10

# –ü—Ä–æ–≤–µ—Ä–∫–∞ swap
swapon -s
free -h

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥–ª–∏ –±—ã—Ç—å —É–±–∏—Ç—ã OOM Killer
dmesg | grep -i "killed process"
journalctl -k | grep -i "out of memory"
```

#### 2.3 –°–µ—Ç–µ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
netstat -tuln | grep -E "(3000|5432|6379|5060|8021)"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker —Å–µ—Ç–µ–π
docker network inspect dialer_dialer_network
```

### üìà –≠—Ç–∞–ø 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (20-30 –º–∏–Ω—É—Ç)

#### 3.1 –£–ª—É—á—à–µ–Ω–∏–µ health checks
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞–º—è—Ç–∏ –≤ health checks
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–æ–ª–µ–µ —á–∞—Å—Ç—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏

#### 3.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–æ—Ç–∞—Ü–∏–∏ –ª–æ–≥–æ–≤
```bash
# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ª–æ–≥–æ–≤ Docker
# –í /etc/docker/daemon.json:
{
  "log-driver": "json-file",
  "log-opts": {
    "max-size": "100m",
    "max-file": "3"
  }
}
```

#### 3.3 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤ –ø–∞–º—è—Ç–∏/CPU
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä–∞ –ª–æ–≥–æ–≤
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –∫ –ë–î

### üõ°Ô∏è –≠—Ç–∞–ø 4: –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ä—ã (15-20 –º–∏–Ω—É—Ç)

#### 4.1 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è restart policies
```yaml
# –í docker-compose.yml –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:
restart: unless-stopped
deploy:
  restart_policy:
    condition: on-failure
    delay: 5s
    max_attempts: 3
    window: 120s
```

#### 4.2 –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ —Ä–µ—Å—É—Ä—Å–æ–≤
```yaml
# –ü—Ä–∏–º–µ—Ä –¥–ª—è backend:
deploy:
  resources:
    limits:
      memory: 1G
      cpus: '0.50'
    reservations:
      memory: 512M
      cpus: '0.25'
```

#### 4.3 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ graceful shutdown
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –¢–∞–π–º–∞—É—Ç—ã –¥–ª—è graceful shutdown
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º

## üéØ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø–∞–¥–µ–Ω–∏–π

### üíæ 1. –£—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏
**–°–∏–º–ø—Ç–æ–º—ã**: –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è RAM
**–ü—Ä–æ–≤–µ—Ä–∫–∞**: 
```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏ Node.js –ø—Ä–æ—Ü–µ—Å—Å–∞
docker exec dialer_backend node -e "console.log(process.memoryUsage())"
```

### üìù 2. –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤
**–°–∏–º–ø—Ç–æ–º—ã**: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∏—Å–∫–∞, –º–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ I/O
**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```bash
du -sh /var/lib/docker/containers/*/
```

### üîå 3. –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ –ë–î
**–°–∏–º–ø—Ç–æ–º—ã**: Connection pool exhausted, timeout'—ã
**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```bash
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
docker exec dialer_postgres psql -U dialer_user -d dialer_db -c "SELECT count(*) FROM pg_stat_activity;"
```

### üìû 4. –ü—Ä–æ–±–ª–µ–º—ã FreeSWITCH
**–°–∏–º–ø—Ç–æ–º—ã**: –í—ã—Å–æ–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU, memory leaks
**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```bash
docker exec dialer_freeswitch fs_cli -x "show channels"
docker exec dialer_freeswitch fs_cli -x "status"
```

### üåê 5. –°–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
**–°–∏–º–ø—Ç–æ–º—ã**: Timeout'—ã –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏, –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
docker exec dialer_backend ping -c 3 dialer_postgres
docker exec dialer_backend ping -c 3 dialer_redis
```

## üöÄ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### üìä –°–∫—Ä–∏–ø—Ç –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
```bash
#!/bin/bash
# monitoring_loop.sh - –∑–∞–ø—É—Å–∫–∞—Ç—å –≤ —Ñ–æ–Ω–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
while true; do
    timestamp=$(date '+%Y-%m-%d %H:%M:%S')
    echo "[$timestamp] Checking system status..."
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
    docker ps --format "table {{.Names}}\t{{.Status}}" | grep -v "Up"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
    docker stats --no-stream --format "{{.Name}}: CPU {{.CPUPerc}}, MEM {{.MemUsage}}"
    
    sleep 300  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
done
```

### üì± –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏
```bash
#!/bin/bash
# alert_on_crash.sh
check_service() {
    if ! docker ps --filter "name=$1" --filter "status=running" | grep -q $1; then
        echo "ALERT: Service $1 is down!" | mail -s "Docker Service Down" admin@company.com
        # –ò–ª–∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram/Slack
    fi
}

for service in dialer_backend dialer_postgres dialer_redis dialer_freeswitch; do
    check_service $service
done
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

- [ ] –°–æ–±—Ä–∞–Ω—ã –ª–æ–≥–∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø–∞–¥–µ–Ω–∏–π
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –¥–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ  
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Ä–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ Docker
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- [ ] –£–ª—É—á—à–µ–Ω—ã health checks
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏—è—Ö
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã graceful shutdown handlers
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

## üîÑ –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø–∞–¥–µ–Ω–∏—è

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–æ–±—Ä–∞—Ç—å –ª–æ–≥–∏** –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã** (–ø–∞–º—è—Ç—å, –¥–∏—Å–∫, CPU)
3. **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–º–ø —Å–æ—Å—Ç–æ—è–Ω–∏—è** –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã** —Å –ø–æ–ª–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
5. **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**
6. **–û–±–Ω–æ–≤–∏—Ç—å —ç—Ç–æ—Ç –ø–ª–∞–Ω** –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π

- **–û—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫**: [–≤–∞—à–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã]
- **DevOps –∫–æ–º–∞–Ω–¥–∞**: [–∫–æ–Ω—Ç–∞–∫—Ç—ã –∫–æ–º–∞–Ω–¥—ã]
- **–õ–æ–≥-—Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤**: `/logs/crashes/` 
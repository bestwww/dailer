# üöÄ –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SIP –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ

## ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞ - –æ–±–Ω–æ–≤–ª–µ–Ω —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–æ–≤

**–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞:**
- ‚úÖ IP `46.173.16.147` –¥–æ–±–∞–≤–ª–µ–Ω –≤ whitelist
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è  
- ‚úÖ –í—Å–µ –Ω–æ–º–µ—Ä–∞ –¥–æ–ª–∂–Ω—ã –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `7` (–±–µ–∑ `+`)

## üéØ –î–µ–π—Å—Ç–≤–∏—è –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ:

### 1. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –∏–∑ git:
```bash
cd ~/dailer
git pull origin main
```

### 2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è FreeSWITCH:
```bash
./fix-freeswitch-config.sh
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```bash
./diagnose-sip-detailed.sh
```

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

### ‚úÖ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
- **Gateway Status**: `UP` 
- **Gateway State**: `NOREG` (–ø—Ä–∞–≤–∏–ª—å–Ω–æ - –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)
- **Username**: –ø—É—Å—Ç–æ–π (–Ω–µ "FreeSWITCH")
- **Caller ID**: `79058615815` (–±–µ–∑ `+`)
- **–¢–µ—Å—Ç–æ–≤—ã–π –∑–≤–æ–Ω–æ–∫**: –±–µ–∑ –æ—à–∏–±–∫–∏ `INTERWORKING`

### üìû –§–æ—Ä–º–∞—Ç—ã –Ω–æ–º–µ—Ä–æ–≤:
- **Caller ID**: `79058615815` ‚úÖ
- **–ù–æ–º–µ—Ä–∞ –¥–ª—è –∑–≤–æ–Ω–∫–æ–≤**: `79206054020` ‚úÖ  
- **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ**: `+79058615815` ‚ùå

## üîß –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

1. **SIP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - —É–±—Ä–∞–Ω—ã username/password, –æ—Ç–∫–ª—é—á–µ–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
2. **–§–æ—Ä–º–∞—Ç Caller ID** - –∏–∑–º–µ–Ω–µ–Ω —Å `+79058615815` –Ω–∞ `79058615815`
3. **–§–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–æ–≤** - –≤—Å–µ –Ω–æ–º–µ—Ä–∞ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `7` –±–µ–∑ `+`
4. **–°–∫—Ä–∏–ø—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏** - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–¥ –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç
5. **–¢–µ—Å—Ç–æ–≤—ã–µ –∑–≤–æ–Ω–∫–∏** - –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–æ–≤

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤:
- SIP –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–¥–æ–∑–≤–æ–Ω–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- –ó–≤–æ–Ω–∫–∏ –±—É–¥—É—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ `62.141.121.197:5070`

## üÜò –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞–ª–∏—Å—å:

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ FreeSWITCH
docker logs dialer_freeswitch_host | tail -50

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å gateway
docker exec dialer_freeswitch_host fs_cli -x "sofia status gateway sip_trunk"

# –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ (–µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç)
docker-compose restart
```

**–í—Å–µ –≥–æ—Ç–æ–≤–æ! üöÄ** 